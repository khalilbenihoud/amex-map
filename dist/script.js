const restaurants = [
    { name: "114 Faubourg", address: "114 Rue du Faubourg Saint-Honoré, 75008 Paris", lat: 48.8732, lng: 2.3134, type: "Gastronomique", stars: "1 Star" },
    { name: "Allard", address: "41 rue Saint-André-des-Arts, 75006 Paris", lat: 48.8533, lng: 2.3411, type: "Bistrot", stars: "" },
    { name: "Apicius", address: "20 Rue d'Artois, 75008 Paris", lat: 48.8731, lng: 2.3082, type: "Gastronomique", stars: "" },
    { name: "Benoit Paris", address: "20 Rue Saint-Martin, 75004 Paris", lat: 48.8584, lng: 2.3481, type: "Bistrot", stars: "1 Star" },
    { name: "Alléno Paris", address: "Carré des Champs-Élysées, 8 Avenue Dutuit, 75008 Paris", lat: 48.8661, lng: 2.3164, type: "Gastronomique", stars: "3 Stars" },
    { name: "Brasserie Lutetia", address: "45 Boulevard Raspail, 75006 Paris", lat: 48.8511, lng: 2.327, type: "Brasserie", stars: "" },
    { name: "L'Oiseau Blanc", address: "19 Avenue Kléber, 75116 Paris", lat: 48.8698, lng: 2.2926, type: "Gastronomique", stars: "2 Stars" },
    { name: "Septime", address: "80 Rue de Charonne, 75011 Paris", lat: 48.8539, lng: 2.3807, type: "Moderne", stars: "1 Star" },
    { name: "Frenchie", address: "5 Rue du Nil, 75002 Paris", lat: 48.8676, lng: 2.3475, type: "Moderne", stars: "1 Star" },
    { name: "Epicure", address: "112 Rue du Faubourg Saint-Honoré, 75008 Paris", lat: 48.8728, lng: 2.3137, type: "Gastronomique", stars: "3 Stars" },
    { name: "Beefbar Paris", address: "5 Rue Marbeuf, 75008 Paris", lat: 48.8675, lng: 2.3036, type: "Viandes", stars: "" },
    { name: "Chocho", address: "54 Rue de Paradis, 75010 Paris", lat: 48.876, lng: 2.3524, type: "Moderne", stars: "" },
    { name: "Clown Bar", address: "114 Rue Amelot, 75011 Paris", lat: 48.8637, lng: 2.3686, type: "Bistrot", stars: "" },
    { name: "Coya Paris", address: "83-85 Rue du Bac, 75007 Paris", lat: 48.8542, lng: 2.3241, type: "Péruvien", stars: "" },
    { name: "Daroco Bourse", address: "6 Rue Vivienne, 75002 Paris", lat: 48.8685, lng: 2.3397, type: "Italien", stars: "" },
    { name: "19.20 by Norbert Tarayre", address: "33 Avenue George V, 75008 Paris", lat: 48.869, lng: 2.3006, type: "Bistrot", stars: "" },
    { name: "Alain Ducasse Baccarat", address: "11 Place des États-Unis, 75116 Paris", lat: 48.8672, lng: 2.2933, type: "Gastronomique", stars: "" },
    { name: "MAMO MICHELANGELO", address: "4 Rue des Cordiers, 06600 Antibes", lat: 43.5806, lng: 7.1246, type: "Italien", stars: "" },
    { name: "Les Pêcheurs", address: "10 Bd Maréchal Juin, 06160 Antibes", lat: 43.5574, lng: 7.1264, type: "Gastronomique", stars: "1 Star" },
    { name: "La Môme Plage", address: "44 boulevard de la Croisette, 06400 Cannes", lat: 43.5487, lng: 7.027, type: "Plage", stars: "" },
    { name: "La Palme d'Or", address: "73 boulevard de la Croisette, 06400 Cannes", lat: 43.5478, lng: 7.0245, type: "Gastronomique", stars: "2 Stars" },
    { name: "La Guérite", address: "Ile Sainte-Marguerite, 06400 Cannes", lat: 43.5204, lng: 7.0423, type: "Méditerranéen", stars: "" },
    { name: "Le Louis XV - Alain Ducasse", address: "Place du Casino, 98000 Monaco", lat: 43.7386, lng: 7.4269, type: "Gastronomique", stars: "3 Stars" },
    { name: "Le Grill", address: "Place du Casino, 98000 Monaco", lat: 43.7397, lng: 7.4277, type: "Grill", stars: "1 Star" },
    { name: "Blue Bay", address: "40 Avenue Princesse Grace, 98000 Monaco", lat: 43.748, lng: 7.4387, type: "Gastronomique", stars: "2 Stars" },
    { name: "La Vague d'Or", address: "Plage de la Bouillabaisse, 83990 Saint-Tropez", lat: 43.2687, lng: 6.6508, type: "Gastronomique", stars: "3 Stars" },
    { name: "Beefbar Saint-Tropez", address: "70 chemin du Pinet, 83990 Saint-Tropez", lat: 43.257, lng: 6.643, type: "Viandes", stars: "" },
    { name: "L'Amandier de Mougins", address: "48 Avenue Jean-Charles Mallet, 06250 Mougins", lat: 43.6, lng: 7, type: "Provençal", stars: "" },
    { name: "Le Galion", address: "Nouveau Port de Menton, 06500 Menton", lat: 43.78, lng: 7.51, type: "Fruits de mer", stars: "" },
    { name: "Le Sarkara", address: "238 Rue des Clarines, 73120 Courchevel", lat: 45.4162, lng: 6.6358, type: "Gastronomique", stars: "2 Stars" },
    { name: "Le Chabichou", address: "90 Rue Des Chenus, 73120 Courchevel 1850", lat: 45.4162, lng: 6.6302, type: "Gastronomique", stars: "2 Stars" },
    { name: "Flocons de Sel", address: "1775 Route du Leutaz, 74120 Megève", lat: 45.8365, lng: 6.63, type: "Gastronomique", stars: "3 Stars" },
    { name: "La Dame de Pic - Le 1920", address: "447 Chemin de la Rocaille, 74120 Megève", lat: 45.845, lng: 6.625, type: "Gastronomique", stars: "1 Star" },
    { name: "Kaito Megève", address: "373 Chemin des Follières, 74120 Megève", lat: 45.8778, lng: 6.6346, type: "Japonais Fusion", stars: "" },
    { name: "Bambini Megève", address: "1306 Route Nationale, 74120 Megève", lat: 45.865, lng: 6.625, type: "Italien", stars: "" },
    { name: "Kinugawa Megève", address: "199 rue Charles Feige, 74120 Megève", lat: 45.857, lng: 6.6177, type: "Japonais", stars: "" },
    { name: "La Table de l'Ours", address: "Montée de Bellevarde, 73150 Val-d'Isère", lat: 45.448, lng: 6.98, type: "Gastronomique", stars: "1 Star" },
    { name: "Villa Oriana", address: "27 Rue Esprit des Lois, 33000 Bordeaux", lat: 44.842, lng: -.57, type: "Italien", stars: "" },
    { name: "Coco Lyon", address: "13 Place Jules Ferry, 69006 Lyon", lat: 45.766, lng: 4.86, type: "Brasserie", stars: "" },
    { name: "Chez Vincent", address: "2 Bis Avenue des Chartreux, 13004 Marseille", lat: 43.305, lng: 5.4, type: "Traditionnel", stars: "" },
    { name: "Le Grand Contrôle", address: "12 rue de l'Indépendance-Américaine, 78000 Versailles", lat: 48.8013, lng: 2.12, type: "Gastronomique", stars: "1 Star" },
    { name: "Alchémille", address: "53 route de Lapoutroie, 68240 Kaysersberg", lat: 48.1396, lng: 7.2618, type: "Gastronomique", stars: "1 Star" },
    { name: "La Maison dans le Parc", address: "3 Rue Sainte-Catherine, 54000 Nancy", lat: 48.6946, lng: 6.1843, type: "Gastronomique", stars: "1 Star" },
    { name: "Le Verbois", address: "6 Hameau de la Grande Folie, 60740 Saint-Maximin", lat: 49.2222, lng: 2.4542, type: "Gastronomique", stars: "1 Star" },
    { name: "L'Odas", address: "Passage Maurice Lenfant, 76000 Rouen", lat: 49.4443, lng: 1.0924, type: "Gastronomique", stars: "1 Star" },
    { name: "Maximin Hellio", address: "64 Rue Gambetta, 14800 Deauville", lat: 49.3592, lng: .0751, type: "Gastronomique", stars: "1 Star" },
    { name: "L'Essentiel", address: "29 Rue Mirabeau, 14800 Deauville", lat: 49.3601, lng: .0794, type: "Gastronomique", stars: "1 Star" },
    { name: "L'Atre", address: "25 Cours des Fossés, 14600 Honfleur", lat: 49.419, lng: .2347, type: "Gastronomique", stars: "" }
]; const ICONS = { star: '<svg class="icon" viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>', map: '<svg class="icon" viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>', trip: '<svg class="icon" viewBox="0 0 24 24"><path d="M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"/></svg>', globe: '<svg class="icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>', list: '<svg class="icon" viewBox="0 0 24 24"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/></svg>', mapAlt: '<svg class="icon" viewBox="0 0 24 24"><path d="M20.5 3l-6 2.25L8.5 3 3.5 4.88v16.24l6-2.25 6 2.25 5-1.88V3zM14 19.38l-5.5-2.06v-12l5.5 2.06v12zm-5.5-12.06v12L4 21V5l4.5 2.32zm12 12l-4.5-1.69v-12l4.5 1.69v12z"/></svg>' }; const map = L.map('map', { zoomControl: !1, preferCanvas: !0 }).setView([46.603354, 1.888334], 6); L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', { attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>', subdomains: 'abcd', maxZoom: 20 }).addTo(map); L.control.zoom({ position: 'bottomright' }).addTo(map); const markers = {}, listContainer = document.getElementById('restaurant-list'), searchInput = document.getElementById('restaurant-search'), featureGroup = L.featureGroup(); function renderList(e) { listContainer.innerHTML = '', e.forEach((e => { const t = document.createElement('div'); t.className = 'restaurant-card'; const a = e.stars ? `<div class="stars-badge">${ICONS.star} ${e.stars}</div>` : '', s = encodeURIComponent(`${e.name} restaurant ${e.address}`), n = `https://www.google.com/search?q=${s}`, l = encodeURIComponent(`${e.name}, ${e.address}`), i = `https://www.google.com/maps/dir/?api=1&destination=${l}`; t.innerHTML = `\n            <div class="card-header">\n                <h3>${e.name}</h3>\n                ${a}\n            </div>\n            <div class="location-row">\n                ${ICONS.map}\n                <span>${e.address}</span>\n            </div>\n            <div class="card-footer">\n                <span class="tag">${e.type}</span>\n                <div class="card-actions">\n                    <a href="${i}" target="_blank" class="action-link secondary" onclick="event.stopPropagation()" title="Itinéraire">\n                        ${ICONS.trip}\n                    </a>\n                    <a href="${n}" target="_blank" class="action-link primary" onclick="event.stopPropagation()" title="Site Web">\n                        ${ICONS.globe} Site\n                    </a>\n                </div>\n            </div>\n        `, t.addEventListener('click', (() => { const t = markers[e.name]; t && (map.flyTo([e.lat, e.lng], 16, { duration: 1.2 }), t.openPopup(), document.querySelectorAll('.restaurant-card').forEach((e => e.classList.remove('active'))), t.classList.add('active'), e.element.classList.add('active')) })), e.element = t, listContainer.appendChild(t) })) } function initMarkers() { featureGroup.clearLayers(), restaurants.forEach((e => { const t = L.marker([e.lat, e.lng]), a = encodeURIComponent(`${e.name} restaurant ${e.address}`), s = `https://www.google.com/search?q=${a}`, n = encodeURIComponent(`${e.name}, ${e.address}`), l = `https://www.google.com/maps/dir/?api=1&destination=${n}`; t.bindPopup(`\n            <div class="custom-popup">\n                <h3>${e.name}</h3>\n                <p>${ICONS.map} ${e.address}</p>\n                <div style="display:flex; justify-content:space-between; align-items:center; margin-top:12px; gap:10px;">\n                    <div class="popup-tag">${e.type}</div>\n                    <div style="display:flex; gap:8px;">\n                        <a href="${l}" target="_blank" class="popup-icon-link" title="Itinéraire">\n                            ${ICONS.trip}\n                        </a>\n                        <a href="${s}" target="_blank" class="popup-icon-link" title="Site Web">\n                            ${ICONS.globe}\n                        </a>\n                    </div>\n                </div>\n            </div>\n        `), t.addTo(map), t.addTo(featureGroup), t.on('click', (() => { document.querySelectorAll('.restaurant-card').forEach((e => e.classList.remove('active'))), e.element && (e.element.scrollIntoView({ behavior: 'smooth', block: 'center' }), e.element.classList.add('active')) })), markers[e.name] = t })), restaurants.length > 0 && map.fitBounds(featureGroup.getBounds().pad(.1)) } const clearButton = document.getElementById('clear-search'); function filterList(e) { map.eachLayer((e => { e instanceof L.Marker && map.removeLayer(e) })); const t = []; restaurants.forEach((a => { const s = a.name.toLowerCase().includes(e) || a.address.toLowerCase().includes(e); a.element && (a.element.style.display = s ? 'block' : 'none'), s && (markers[a.name].addTo(map), t.push(markers[a.name])) })), t.length > 0 && map.fitBounds(L.featureGroup(t).getBounds().pad(.1)) } function debounce(e, t) { let a; return function (...s) { clearTimeout(a), a = setTimeout((() => e(...s)), t) } } const handleSearch = debounce((e => { const t = e.target.value.toLowerCase(); clearButton.style.display = t.length > 0 ? 'block' : 'none', filterList(t) }), 150); searchInput.addEventListener('input', handleSearch), clearButton.addEventListener('click', (() => { searchInput.value = '', clearButton.style.display = 'none', filterList(''), searchInput.focus() })); const toggleBtn = document.getElementById('mobile-toggle'), container = document.querySelector('.container'); let isMapVisible = !1; toggleBtn && toggleBtn.addEventListener('click', (() => { isMapVisible = !isMapVisible, isMapVisible ? (container.classList.add('show-map'), toggleBtn.innerHTML = `${ICONS.list} Liste`, setTimeout((() => { map.invalidateSize() }), 300)) : (container.classList.remove('show-map'), toggleBtn.innerHTML = `${ICONS.mapAlt} Carte`) })), window.addEventListener('load', (() => { map.invalidateSize() })), renderList(restaurants), initMarkers(); const modal = document.getElementById('welcome-modal'), closeModalBtn = document.getElementById('close-modal'), startBtn = document.getElementById('start-btn'), infoBtn = document.getElementById('info-btn'); function openModal() { modal.classList.add('active') } function closeModal() { modal.classList.remove('active') } modal && (infoBtn && infoBtn.addEventListener('click', openModal), closeModalBtn.addEventListener('click', closeModal), startBtn.addEventListener('click', closeModal), modal.addEventListener('click', (e => { e.target === modal && closeModal() })));
